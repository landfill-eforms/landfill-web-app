<div class="page grey-background flex-container" fxLayout="row">
	<div class="flex-item" fxFlex>
		<md-tab-group class="md-tab-header-white" style="height: 100%">
			<md-tab label="Instantaneous">
				<div class="tab-contents grey-background">
					<div *ngIf="!isDataLoaded" class="page-loading-indicator-container">
						<app-page-loading-indicator></app-page-loading-indicator>
					</div>
					<div *ngIf="isDataLoaded">
						<md-card>
							<md-card-content>
								<div class="card-title">
									Errors
								</div>
								<div *ngIf="!dataSet.errors?.instantaneous?.length" style="padding:8px 0;">
									<i>No errors found.</i>
								</div>
								<div *ngIf="dataSet.errors">
									<div *ngFor="let error of dataSet.errors.instantaneous" class="error-item">
										{{error}}
									</div>
								</div>
							</md-card-content>
						</md-card>
						<md-card class="data-table-card">
							<md-card-content>
								<div class="data-table-card-title-row">
									Instantaneous Readings
								</div>
								<div class="unselectable data-table-header-row flex-container" fxLayout="row">
									<div class="data-table-checkbox-column data-table-checkbox-header truncate flex-item" fxFlex="68px">
										<md-checkbox></md-checkbox>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="3">
										<span class="data-table-header-label">Grid</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="3">
										<span class="data-table-header-label">Start</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="3">
										<span class="data-table-header-label">End</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Instrument</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Barometric</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Reading (ppm)</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">IME Number(s)</span>
									</div>
									<div class="data-table-last-column truncate flex-item" fxFlex="40px">
										<span class="data-table-header-label">Action</span>
									</div>
								</div>
								<div>
									<div *ngFor="let unverifiedInstantaneousData of dataSet.unverifiedInstantaneousData" class="data-table-row">
										<div class="data-table-row-content flex-container" 
											fxLayout="row" 
											(dblclick)="editInstantaneous(unverifiedInstantaneousData)"
											[ngClass]="{'data-table-row-content-active': activeItem === unverifiedInstantaneousData}">
											<div class="data-table-checkbox-column truncate flex-item" fxFlex="68px">
												<md-checkbox [checked]="unverifiedInstantaneousData.selected" 
													(click)="toggleInstantaneous(unverifiedInstantaneousData)">
												</md-checkbox>
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="3">
												{{unverifiedInstantaneousData.monitoringPoint?.name}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="3">
												{{DateTimeUtils.getTime(unverifiedInstantaneousData.startTime)}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="3">
												{{DateTimeUtils.getTime(unverifiedInstantaneousData.endTime)}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												<div *ngIf="!unverifiedInstantaneousData.instrument?.serialNumber" class="error-inline">
													None set
												</div>
												{{unverifiedInstantaneousData.instrument?.serialNumber}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												<div *ngIf="!unverifiedInstantaneousData.barometricPressure" class="error-inline">
													Not set
												</div>
												<div [ngStyle]="{'error-inline': unverifiedInstantaneousData.barometricPressure < 2950 || unverifiedInstantaneousData.barometricPressure > 3050}">
													{{unverifiedInstantaneousData.barometricPressure / 100}}
												</div>
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{unverifiedInstantaneousData.methaneLevel / 100}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{unverifiedInstantaneousData.imeNumbers[0] && unverifiedInstantaneousData.imeNumbers[0].imeNumber}}
											</div>
											<div class="data-table-action-column truncate flex-item" fxFlex="64px">
												<button md-icon-button [mdMenuTriggerFor]="instantaneousMenu">
													<md-icon>more_vert</md-icon>
												</button>
												<md-menu #instantaneousMenu="mdMenu">
													<button md-menu-item (click)="editInstantaneous(unverifiedInstantaneousData)">Edit</button>
													<button md-menu-item>Delete</button>
												</md-menu>
											</div>
										</div>
									</div>
								</div>
								<div class="data-table-card-footer"></div>
							</md-card-content>
						</md-card>
						<md-card class="data-table-card">
							<md-card-content>
								<div class="data-table-card-title-row">
									Warmspot Entries
								</div>
								<div class="unselectable data-table-header-row flex-container" fxLayout="row">
									<div class="data-table-checkbox-column data-table-checkbox-header truncate flex-item" fxFlex="68px">
										<md-checkbox></md-checkbox>
									</div>
									<div class="data-table-first-column truncate flex-item" fxFlex="3">
										<span class="data-table-header-label">Grid</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Instrument</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Reading (ppm)</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Size</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="33">
										<span class="data-table-header-label">Description</span>
									</div>
									<div class="data-table-last-column truncate flex-item" fxFlex="40px">
										<span class="data-table-header-label">Action</span>
									</div>
								</div>
								<div>
									<div *ngFor="let unverifiedWarmspotData of dataSet.unverifiedWarmspotData" class="data-table-row">
										<div class="data-table-row-content flex-container" 
											fxLayout="row" 
											(dblclick)="editWarmspot(unverifiedWarmspotData)"
											[ngClass]="{'data-table-row-content-active': activeItem === unverifiedWarmspotData}">
											<div class="data-table-checkbox-column truncate flex-item" fxFlex="68px">
												<md-checkbox [checked]="selectedInstantaneous.indexOf(unverifiedInstantaneousData) > -1" 
													(click)="toggleInstantaneous(unverifiedInstantaneousData)">
												</md-checkbox>
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="3">
												{{unverifiedWarmspotData.monitoringPoint?.name}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												<div *ngIf="!unverifiedWarmspotData.instrument?.serialNumber" class="error-inline">
													None set
												</div>
												{{unverifiedWarmspotData.instrument?.serialNumber}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{unverifiedWarmspotData.methaneLevel / 100}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												<div *ngIf="!unverifiedWarmspotData.size" class="error-inline">
													Not set
												</div>
												{{unverifiedWarmspotData.size}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="33">
												<div *ngIf="!unverifiedWarmspotData.size" class="error-inline">
													Not set
												</div>
												{{unverifiedWarmspotData.description}}
											</div>
											<div class="data-table-action-column truncate flex-item" fxFlex="64px">
												<button md-icon-button [mdMenuTriggerFor]="warmspotMenu">
													<md-icon>more_vert</md-icon>
												</button>
												<md-menu #warmspotMenu="mdMenu">
													<button md-menu-item (click)="editWarmspot(unverifiedWarmspotData)">Edit</button>
													<button md-menu-item>Delete</button>
												</md-menu>
											</div>
										</div>
									</div>
								</div>
								<div class="data-table-card-footer"></div>
							</md-card-content>
						</md-card>
						<md-card class="data-table-card">
							<md-card-content>
								<div class="data-table-card-title-row">
									Instantaneous Exceedances
								</div>
								<div class="unselectable data-table-header-row flex-container" fxLayout="row">
									<div class="data-table-first-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">IME Number</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Grid</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Discovery Date</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Initial Reading (ppm)</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="25">
										<span class="data-table-header-label">Description</span>
									</div>
									<div class="data-table-last-column truncate flex-item" fxFlex="40px">
										<span class="data-table-header-label">Action</span>
									</div>
								</div>
								<div>
									<div *ngFor="let imeNumber of dataSet.imeNumbers" class="data-table-row">
										<div class="data-table-row-content flex-container" 
											fxLayout="row" 
											(dblclick)="editImeNumber(imeNumber)"
											[ngClass]="{'data-table-row-content-active': activeItem === imeNumber}">
											<div class="data-table-first-column truncate flex-item" fxFlex>
												{{imeNumber.imeNumber}}*
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{imeNumber.monitoringPoints[0].name}} <!-- TODO Fix this -->
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{imeNumber.imeData && imeNumber.imeData[0] ? DateTimeUtils.getDate(imeNumber.imeData[0].dateTime) : ''}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{imeNumber.imeData && imeNumber.imeData[0] ? imeNumber.imeData[0].methaneLevel / 100: ''}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="25">
												{{imeNumber.imeData && imeNumber.imeData[0] ? imeNumber.imeData[0].description : ''}}
											</div>
											<div class="data-table-action-column truncate flex-item" fxFlex="64px">
												<button md-icon-button [mdMenuTriggerFor]="imeMenu">
													<md-icon>more_vert</md-icon>
												</button>
												<md-menu #imeMenu="mdMenu">
													<button md-menu-item (click)="editImeNumber(imeNumber)">Edit</button>
													<button md-menu-item>Delete</button>
												</md-menu>
											</div>
										</div>
									</div>
								</div>
								<div class="data-table-card-footer"></div>
							</md-card-content>
						</md-card>
					</div>
				</div>
			</md-tab>
			<md-tab label="Integrated">
				<div class="tab-contents grey-background">
					<div *ngIf="!isDataLoaded" class="page-loading-indicator-container">
						<app-page-loading-indicator></app-page-loading-indicator>
					</div>
					<div *ngIf="isDataLoaded">
						<md-card>
							<md-card-content>
								<div class="card-title">
									Errors
								</div>
								<div *ngIf="!dataSet.errors?.integrated?.length" style="padding:8px 0;">
									<i>No errors found.</i>
								</div>
								<div *ngIf="dataSet.errors">
									<div *ngFor="let error of dataSet.errors.integrated" class="error-item">
										{{error}}
									</div>
								</div>
							</md-card-content>
						</md-card>
						<md-card class="data-table-card">
							<md-card-content>
								<div class="data-table-card-title-row">
									Integrated Readings
								</div>
								<div class="unselectable data-table-header-row flex-container" fxLayout="row">
									<div class="data-table-checkbox-column data-table-checkbox-header truncate flex-item" fxFlex="68px">
										<md-checkbox></md-checkbox>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="3">
										<span class="data-table-header-label">Grid</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="3">
										<span class="data-table-header-label">Start</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="3">
										<span class="data-table-header-label">End</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Instrument</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Barometric</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Reading (ppm)</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="4">
										<span class="data-table-header-label">Bag No.</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="4">
										<span class="data-table-header-label">Volume</span>
									</div>
									<div class="data-table-last-column truncate flex-item" fxFlex="40px">
										<span class="data-table-header-label">Action</span>
									</div>
								</div>
								<div *ngIf="dataSet.unverifiedIntegratedData?.length == 0" class="data-table-no-data-label">
									No data
								</div>
								<div>
									<div *ngFor="let unverifiedIntegratedData of dataSet.unverifiedIntegratedData" class="data-table-row">
										<div class="data-table-row-content flex-container" 
											fxLayout="row" 
											(dblclick)="editIntegrated(unverifiedIntegratedData)"
											[ngClass]="{'data-table-row-content-active': activeItem === unverifiedIntegratedData}">
											<div class="data-table-checkbox-column truncate flex-item" fxFlex="68px">
												<md-checkbox [checked]="unverifiedIntegratedData.selected" 
													(click)="toggleIntegrated(unverifiedIntegratedData)">
												</md-checkbox>
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="3">
												{{unverifiedIntegratedData.monitoringPoint?.name}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="3">
												{{DateTimeUtils.getTime(unverifiedIntegratedData.startTime)}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="3">
												{{DateTimeUtils.getTime(unverifiedIntegratedData.endTime)}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												<div *ngIf="!unverifiedIntegratedData.instrument?.serialNumber" class="error-inline">
													None set
												</div>
												{{unverifiedIntegratedData.instrument?.serialNumber}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												<div *ngIf="!unverifiedIntegratedData.barometricPressure" class="error-inline">
													Not set
												</div>
												<div [ngStyle]="{'error-inline': unverifiedIntegratedData.barometricPressure < 2950 || unverifiedIntegratedData.barometricPressure > 3050}">
													{{unverifiedIntegratedData.barometricPressure / 100}}
												</div>
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{unverifiedIntegratedData.methaneLevel / 100}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="4">
												{{unverifiedIntegratedData.bagNumber}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="4">
												{{unverifiedIntegratedData.volume}}
											</div>
											<div class="data-table-action-column truncate flex-item" fxFlex="64px">
												<button md-icon-button [mdMenuTriggerFor]="integratedMenu">
													<md-icon>more_vert</md-icon>
												</button>
												<md-menu #integratedMenu="mdMenu">
													<button md-menu-item (click)="editIntegrated(unverifiedIntegratedData)">Edit</button>
													<button md-menu-item>Delete</button>
												</md-menu>
											</div>
										</div>
									</div>
								</div>
								<div class="data-table-card-footer"></div>
							</md-card-content>
						</md-card>
						<md-card class="data-table-card">
							<md-card-content>
								<div class="data-table-card-title-row">
									Integrated Exceedances
								</div>
								<div class="unselectable data-table-header-row flex-container" fxLayout="row">
									<div class="data-table-first-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">ISE Number</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Grid</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Discovery Date</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex>
										<span class="data-table-header-label">Initial Reading (ppm)</span>
									</div>
									<div class="data-table-column truncate flex-item" fxFlex="25">
										<span class="data-table-header-label">Description</span>
									</div>
									<div class="data-table-last-column truncate flex-item" fxFlex="40px">
										<span class="data-table-header-label">Action</span>
									</div>
								</div>
								<div *ngIf="dataSet.iseNumbers?.length == 0" class="data-table-no-data-label">
									No data
								</div>
								<div>
									<div *ngFor="let iseNumber of dataSet.iseNumbers" class="data-table-row">
										<div class="data-table-row-content flex-container" 
											fxLayout="row" 
											(dblclick)="editIseNumber(iseNumber)"
											[ngClass]="{'data-table-row-content-active': activeItem === iseNumber}">
											<div class="data-table-first-column truncate flex-item" fxFlex>
												{{iseNumber.iseNumber}}*
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{iseNumber.monitoringPoint.name}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{iseNumber.iseData && iseNumber.iseData[0] ? DateTimeUtils.getDate(iseNumber.iseData[0].dateTime) : ''}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex>
												{{iseNumber.iseData && iseNumber.iseData[0] ? iseNumber.iseData[0].methaneLevel / 100: ''}}
											</div>
											<div class="data-table-column truncate flex-item" fxFlex="25">
												{{iseNumber.iseData && iseNumber.iseData[0] ? iseNumber.iseData[0].description : ''}}
											</div>
											<div class="data-table-action-column truncate flex-item" fxFlex="64px">
												<button md-icon-button [mdMenuTriggerFor]="imeMenu">
													<md-icon>more_vert</md-icon>
												</button>
												<md-menu #imeMenu="mdMenu">
													<button md-menu-item (click)="editIseNumber(iseNumber)">Edit</button>
													<button md-menu-item>Delete</button>
												</md-menu>
											</div>
										</div>
									</div>
								</div>
								<div class="data-table-card-footer"></div>
							</md-card-content>
						</md-card>
					</div>
				</div>
			</md-tab>
			<md-tab label="Probe">
				<div class="tab-contents grey-background">
					<div *ngIf="!isDataLoaded" class="page-loading-indicator-container">
						<app-page-loading-indicator></app-page-loading-indicator>
					</div>
					<div *ngIf="isDataLoaded">
						HELLO
					</div>
				</div>
			</md-tab>
		</md-tab-group>
	</div>
	<!--
	<div class="flex-item" fxFlex="320px" class="sideinfo">
		<div class="sideinfo-top-padding"></div>
		<div class="sideinfo-background grey-background">
			<md-card *ngIf="isDataLoaded">
				<md-card-content>
					<div class="card-title">
						Details
					</div>
				</md-card-content>
			</md-card>
		</div>
	</div>
	-->
	<div class="fab-container">
		<div class="flex-container" fxLayout="column" fxLayoutAlign="end center">
			<button md-fab (click)="commitAll()" mdTooltip="Commit" mdTooltipPosition="above" class="fab-action-button flex-item" fxFlex="56px">
				<md-icon>done</md-icon>
			</button>
			<button md-fab (click)="save()" mdTooltip="Save" mdTooltipPosition="above" class="fab-action-button flex-item" fxFlex="56px">
				<md-icon>save</md-icon>
			</button>
		</div>
	</div>
<div>
